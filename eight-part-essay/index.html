<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>技能树 -</title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content><meta property="og:title" content="技能树"><meta property="og:description" content="System Design Principles  KISS  Networking TCP / IP  Connection establishment: three-way handshake Connection termination: four-way handshake why TIME_WAIT? sliding window MSS negotiation  IPC (Inter-process communication)  shared memory memory mapped file pipe (named or anonymous) Unix domain socket parent children process (what will happen to the child process if parent kill child process?)  epoll  differences with select and poll  Process profling  netstat lsof strace pprof /proc or /sys  Web  HTTP protocol  what the meanings of 1xx/2xx/3xx/4xx/5xx How to determine a http response&rsquo;s ending (https://blog."><meta property="og:type" content="article"><meta property="og:url" content="/eight-part-essay/"><meta property="article:section" content><meta itemprop=name content="技能树"><meta itemprop=description content="System Design Principles  KISS  Networking TCP / IP  Connection establishment: three-way handshake Connection termination: four-way handshake why TIME_WAIT? sliding window MSS negotiation  IPC (Inter-process communication)  shared memory memory mapped file pipe (named or anonymous) Unix domain socket parent children process (what will happen to the child process if parent kill child process?)  epoll  differences with select and poll  Process profling  netstat lsof strace pprof /proc or /sys  Web  HTTP protocol  what the meanings of 1xx/2xx/3xx/4xx/5xx How to determine a http response&rsquo;s ending (https://blog."><meta itemprop=wordCount content="384"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-48551763-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class="logo logo--mixed"><a class=logo__link href=/ title=狂想曲 rel=home><div class="logo__item logo__imagebox"><img class=logo__img src=/logo.png></div><div class="logo__item logo__text"><div class=logo__title>狂想曲</div><div class=logo__tagline>勇敢的灵魂追寻本我</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/reading/><span class=menu__text>书单</span></a></li><li class="menu__item menu__item--active"><a class=menu__link href=/eight-part-essay/><span class=menu__text>技能树</span></a></li><li class=menu__item><a class=menu__link href=/investingrule/><span class=menu__text>投资理念</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>技能树</h1></header><div class="content post__content clearfix"><h2 id=system-design-principles>System Design Principles</h2><ul><li>KISS</li></ul><h2 id=networking>Networking</h2><h3 id=tcp--ip>TCP / IP</h3><ul><li>Connection establishment: three-way handshake</li><li>Connection termination: four-way handshake</li><li>why TIME_WAIT?</li><li>sliding window</li><li>MSS negotiation</li></ul><h3 id=ipc-inter-process-communication>IPC (Inter-process communication)</h3><ul><li>shared memory</li><li>memory mapped file</li><li>pipe (named or anonymous)</li><li>Unix domain socket</li><li>parent children process (what will happen to the child process if parent kill child process?)</li></ul><h3 id=epoll>epoll</h3><ul><li>differences with <code>select</code> and <code>poll</code></li></ul><h3 id=process-profling>Process profling</h3><ul><li>netstat</li><li>lsof</li><li>strace</li><li>pprof</li><li>/proc or /sys</li></ul><h2 id=web>Web</h2><ul><li>HTTP protocol<ul><li>what the meanings of 1xx/2xx/3xx/4xx/5xx</li><li>How to determine a http response&rsquo;s ending (<a href=https://blog.csdn.net/gaoyingju/article/details/9223979>https://blog.csdn.net/gaoyingju/article/details/9223979</a>)<ul><li>Content-length</li><li>server closes the tcp connection</li><li>1xx, 204, 304 response has no body</li><li>Transfer-Encoding:chunked，则通过chunk size判断长度</li></ul></li></ul></li><li>Load balancing<ul><li>Network layer or application layer?</li><li>AWS ELB</li></ul></li><li>Nginx<ul><li>What does nginx 502/504 mean?</li><li>How nginx workarounds the <code>TIME_WAIT</code> state during restart without being blocked by <code>TIME_WAIT</code> connections. i.e. smooth restart.</li><li>How nginx workers listen the same ip:port?<ul><li>内核 reuse_port 出来以前: <a href=https://stackoverflow.com/questions/670891/is-there-a-way-for-multiple-processes-to-share-a-listening-socket>https://stackoverflow.com/questions/670891/is-there-a-way-for-multiple-processes-to-share-a-listening-socket</a></li><li>内核 reuse_port 出来以后: <a href=https://www.nginx.com/blog/socket-sharding-nginx-release-1-9-1/>https://www.nginx.com/blog/socket-sharding-nginx-release-1-9-1/</a></li></ul></li></ul></li><li>PHP<ul><li>Internals<ul><li>Autoload</li><li>how array structure is implemented in php</li><li>how to simulate concurrent in php</li><li>Opcache / apc</li><li>are all processes in php-fpm share the same opcache and apcu?</li><li>how apcu is updated by the fpm processes</li></ul></li><li>CGI / FastCGI</li><li>fpm<ul><li>what&rsquo;s in php slow log?</li></ul></li></ul></li><li>Python<ul><li>GIL (Global Interrupt Lock)</li></ul></li></ul><h2 id=database>Database</h2><h3 id=mysql>Mysql</h3><ul><li><p>Cluster</p><ul><li>Master-slave replica</li><li>read / write separation</li><li>database sharding / table sharding</li></ul></li><li><p>Index</p><ul><li><p>MyISAM vs Innodb</p></li><li><p>B/B+ 树，聚簇索引，复合索引</p><ul><li>聚集索引: 索引节点存的就是数据. InnoDB 的聚集索引一般就是主键索引.</li><li>非聚集索引: 索引和数据分开存, 索引节点存的是数据的逻辑指针</li><li>联合索引: 思考联合索引结构是怎样的? <a href=https://bbs.csdn.net/topics/390985501>https://bbs.csdn.net/topics/390985501</a></li><li>次级索引: 这个术语是相对于 InnoDB 的聚集索引来说的, 聚集索引之外的所有索引 (包括联合索引) 都算作次级索引</li></ul><blockquote><p><em>在<strong>innodb</strong>，每个次级索引都存储的主键<strong>key</strong>。因为<strong>innodb</strong>的数据结构决定了，次级索引存储的是主键的值。次级索引的叶子节点并不存储行数据的物理地址。而是存储的该行的主键值。因此，换句话说，主键扮演了行数据的指针。</em></p></blockquote><blockquote><p><em>这是让我们推导另一个有趣的推论</em></p></blockquote><blockquote><p><em>一次级索引包含了两次查找。一次是查找次级索引自身。然后查找主键（聚集索引）</em></p></blockquote><ul><li>InnoDB (实现为聚集索引, 支持事务, 支持行级锁)</li><li>MyISAM (非聚集索引, 支持全文索引, 只支持表级锁)</li><li>不要使用存储过程, 外键, 触发器. [滴滴的 mysql 存储规范](onenote:编程.one#滴滴的 mysql 存储规范&section-id={A9A445F6-738E-0C42-8C57-5627B99B856D}&page-id={BABCC1A7-BD61-9849-A381-EFF382B4534C}&end&base-path=https://d.docs.live.net/2850108539a65c50/文档/Cifer 的笔记本)</li></ul></li></ul></li><li><p>Performance</p><ul><li>table lock / row lock / column lock?</li><li>SQL clause performance analysis: <code>explain</code> that clause</li></ul></li></ul><h3 id=dynamodb>DynamoDB</h3><h3 id=aurora>Aurora</h3><h3 id=locking>Locking</h3><ul><li>Optimistic lock vs Pessimistic lock<ul><li>乐观锁与悲观锁: <a href=http://www.open-open.com/lib/view/open1452046967245.html>http://www.open-open.com/lib/view/open1452046967245.html</a>. 乐观锁的实现: 记录版本, 读的时候记录一下版本, 写的时候对比记录的版本和库里实际的版本, 如果库里版本比读的版本新, 说明被修改过. 那本次写操作就回滚 (感觉这不能称之为锁&mldr; 其实乐观锁的本名叫做乐观并发控制, 这个名字更恰当)</li></ul></li></ul><h3 id=database-cache-policy>Database cache policy</h3><ul><li>Write-through</li><li>Read-write back</li></ul><h3 id=storage-as-service>Storage as service</h3><ul><li>storage as service, not just CRUD, like TAO in facebook</li></ul><h2 id=cache>Cache</h2><h3 id=redis>redis</h3><ul><li>Basics, data structures<ul><li>String</li><li>List</li><li>Set</li><li>Hmget / Hmset</li></ul></li><li>redis 的两种持久化方式. 快照方式如何实现? 假如做快照时有个耗时 5s 的写操作, 快照是做 5s 前的还是 5s 后的? 5s 前的话怎么做? 要把5s前的内容拷贝一份以防止耗时操作把内容修改了吗? (答案是 5s 前，用写时拷贝原则)<ul><li>AOF 刷写模式:<ul><li>appendfsync always, 每次收到写命令就立即强制写入磁盘，是最有保证的完全的持久化，但速度也是最慢的, 一般不推荐使用.</li><li>appendfsync everysec, 每秒钟强制写入磁盘一次，在性能和持久化方面做了很好的折中，是受推荐的方式。</li><li>appendfsync no, 完全依赖OS的写入，一般为30秒左右一次，性能最好但是持久化最没有保证，不被推荐</li></ul></li></ul></li><li>Cluster<ul><li><a href=https://redis.io/topics/cluster-spec>https://redis.io/topics/cluster-spec</a></li></ul></li><li>Redlock (Distributed locks with Redis)</li></ul><h2 id=message-queue>Message Queue</h2><ul><li>Kafka</li><li>AWS SQS</li></ul><h2 id=microservice>Microservice</h2><h3 id=grpc--http2>gRPC / HTTP2</h3><ul><li>difference with HTTP</li></ul><h2 id=online-service-issues-triaging>Online Service Issues Triaging</h2><ul><li>CPU - pprof</li><li>Memory - mem prof</li></ul><h3 id=tools>Tools</h3><ul><li>Datadog</li><li>Kibana logs</li><li>Lightstep</li></ul></div></article></main><div class="authorbox clearfix"><div class=authorbox__header><span class=authorbox__name>About Cifer</span></div></div><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=/investingrule/ rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>投资理念</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=/how-to-learn/ rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>如何学习一个全新的领域</p></a></div></nav><section class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//justforfree.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section></div></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Cifer.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>