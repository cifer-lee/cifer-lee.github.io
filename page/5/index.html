<!doctype html><html class=no-js lang=en><head><meta name=generator content="Hugo 0.85.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title></title><script>(function(a,b){a[b]=a[b].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="Cifer's Personal blog about everything"><meta property="og:title" content><meta property="og:description" content="Cifer's Personal blog about everything"><meta property="og:type" content="website"><meta property="og:url" content="https://cifer76.github.io/"><meta itemprop=name content><meta itemprop=description content="Cifer's Personal blog about everything"><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/css/style.css><link rel=alternate type=application/rss+xml href=/index.xml title><link rel="shortcut icon" href=/favicon.ico><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-48551763-1','auto'),ga('send','pageview'))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class="logo logo--mixed"><a class=logo__link href=/ title=狂想曲 rel=home><div class="logo__item logo__imagebox"><img class=logo__img src=/logo.png></div><div class="logo__item logo__text"><div class=logo__title>狂想曲</div><div class=logo__tagline>勇敢的灵魂追寻本我</div></div></a></div><nav class=menu><button class=menu__btn aria-haspopup=true aria-expanded=false tabindex=0>
<span class=menu__btn-title tabindex=-1>Menu</span></button><ul class=menu__list><li class=menu__item><a class=menu__link href=/investing><span class=menu__text>How to Invest</span></a></li><li class=menu__item><a class=menu__link href=/how-to-learn><span class=menu__text>How to learn new things</span></a></li><li class=menu__item><a class=menu__link href=/reading><span class=menu__text>Readings</span></a></li><li class=menu__item><a class=menu__link href=/eight-part-essay><span class=menu__text>SKILLS</span></a></li></ul></nav></div></header><div class="wrapper flex"><div class=primary><main class="main list" role=main><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/embedded-hashtable-implementation/ rel=bookmark>嵌入式哈系表的实现</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2017-01-05T00:00:00Z>2017-01-05</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/algorithm/ rel=category>Algorithm</a></span></div></div></header><div class="content list__excerpt post__content clearfix">这篇文章是一个例子, 重点在于阐述嵌入式哈系表结构, 而不是针对不同键类型进行哈希的方法.
关于哈希冲突的解决, 我们使用链表存储冲突的节点, 这在一些书里被称为 &ldquo;Separate Chaning&rdquo; 方法.
由于在链表中插入以及删除节点需要更新节点的前继和后继的指针, 所以为了方便的从链表中插入以及删除节点, hlist_node_t 结构中定义两个指针, 分别指向前继和后继.
typedef struct hlist_node_s { struct hlist_node_s *prev; struct hlist_node_s *next; } hlist_node_t; hlist_t 结构中的 heads 是一个数组, 每个数组元素都只是一个头节点, 头节点不会嵌入到别的结构体中.
typedef struct xhash { hlist_node_t *heads; int size; } xhash_t; void hlist_node_init(hlist_node_t *node) { node->next = node->prev = node; } xhash_t *xhash_create(int size) { xhash_t *hash; int i; /* TODO Get next prime bigger than *size* */ /* size = next_prime(size);*/ hash = calloc(1, sizeof *hash); if (!</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/embedded-hashtable-implementation/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/indigo-loxigen/ rel=bookmark>LoxiGen 与 Indigo 项目介绍</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-12-31T00:00:00Z>2016-12-31</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/sdn/ rel=category>SDN</a></span></div></div></header><div class="content list__excerpt post__content clearfix">Indigo 是由 Big Switch 开发, 现在托管在 Floodlight 组织下的 OpenFlow agent 开源实现. OpenFlow 控制器的开源实现有很多, 像是 Ryu, ODL, POX 等等, 但是 agent 方面的开源实现可能相对少一些, Indigo 是一个非常精巧的实现, 但是似乎网上 SDN 相关的中文社区对其介绍的文档却很少, 本文将对 Indigo 及其所依附的 LoxiGen 项目做一个简单的介绍.
关于 LOXI 与 Loxigen LOXI (Logical OpenFlow eXtensible Interface), 是一种描述 OpenFlow 协议的逻辑语言.
LoxiGen 项目能够解读 LOXI 语言, 进而用来生成各种编程语言的 OpenFlow 协议库. 所以说 LoxiGen 实际上是一个 “编译器” 项目, 可想而知 LoxiGen 包含一个前端用来解析 LOXI 语言, 以及包含各种编程语言的后端来生成这些编程语言的代码. 目前包含 Java, Python 以及 C 语言的后端, 生成的 C 版本的协议库叫做 LOCI, Java 版本的叫做 OpenFlowJ, Python 版本的叫做 pyloxi.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/indigo-loxigen/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/a-problem-ryu-indigo-conn-setup/ rel=bookmark>记一次 Indigo 与 Ryu 的连接建立问题</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-12-25T16:03:13Z>2016-12-25</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/sdn/ rel=category>SDN</a></span></div></div></header><div class="content list__excerpt post__content clearfix">之前在研究 Indigo 和 Ryu 的衔接时碰到一个 OpenFlow 连接建立失败的问题, 特此记录下, 希望能够供别人参考.
在了解这个问题之前, 我们先回顾一下 OpenFlow 连接建立过程.
OpenFlow 协议的连接建立过程 根据 OpenFlow 协议标准的陈述我们能够知道, 交换机和控制器之间使用 TCP (或者 SSL) 传输协议, 交换机必须能够主动发起连接 (实际应用中, 连接一般都是都由交换机主动发起), 另外就是所有的 OpenFlow 消息, 都要用网络序 (大端序) 发送 (参见 OpenFlow Spec v1.3 以及 v1.4 的第 7 章)
TCP 连接的建立我们很熟悉了, 就是典型的三此握手过程. 在 TCP 连接建立以后, 交换机和控制器双方在 TCP 连接建立后需要立即发送给 OF_HELLO 消息给对方, 并且 OF_HELLO 必须是双发发送给对方的第一个消息, OF_HELLO 消息同时起到协商 OpenFlow 版本的功能.
当双方都收到了对方的 OF_HELLO 消息并且两边都共同支持一个最小版本, OpenFlow 连接就成功建立了, 接下来控制器就可以向交换机发送其它的消息, 比如一般第一次要发送的就是 OFPT_FEATURES_REQUEST 消息.
遇到的问题 在这部分工作中基于 Ryu 框架我写了个简单的 Ryu 小程序令它与 Indigo 通信, 但是发现似乎连接建立都不成功, 好在 indigo 项目的错误日志部分做的很好, 我打开了 verbose 级别的日志, 发现连接建立过程中 indigo 在收取 OF_HELLO 这个消息失败了, 结合代码发现是在读 socket 时发生了 EAGAIN (Resource temporary unvailable) 错误.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/a-problem-ryu-indigo-conn-setup/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/openflow-oxm-tlv/ rel=bookmark>OpenFlow 协议匹配结构进化与 OXM TLV 解读</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-11-14T00:00:00Z>2016-11-14</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/sdn/ rel=category>SDN</a></span></div></div></header><div class="content list__excerpt post__content clearfix">在 OpenFlow 流表定义中, 报文匹配表项是个重要的行为, 我们下发的每一个流表表项都可以包含一到多个匹配项, 报文进来时会与这些匹配项比较, 如果匹配成功的话, 表项中动作也相应的被附加到报文上. 典型的匹配项有入端口, 源 MAC 地址, 目的 MAC 地址, VLAN Id, 源 IP 地址, 目的 IP 地址, MPLS 标签等等. 不难想象, 网络中的报文种类繁杂, 想要能够匹配每一种报文, 光匹配项就能列一个长长的列表出来, 并且随着各种网络通信协议的不断演进以及越来越复杂的网络业务, 这些匹配项将来还会可能还会增加. 所以在 OpenFlow 协议中, 选择一种合适的数据结构来描述这些匹配项就显得重要起来.
早期的匹配结构 在 OpenFlow 协议早期的版本中, 使用一种固定的数据结构来表述所有的匹配项, 这个数据结构长度固定并且所有的匹配项都包含在里面:
enum ofp_match_type { OFPMT_STANDARD, /* The match fields defined in the ofp_match structure apply */ }; /* Fields to match against flows */ struct ofp_match { uint16_t type; /* One of OFPMT_* */ uint16_t length; /* Length of ofp_match */ uint32_t in_port; /* Input switch port.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/openflow-oxm-tlv/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/binary-tree-traversal/ rel=bookmark>二叉树递归遍历的本质以及用迭代遍历精确模拟递归遍历</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-10-22T17:24:36Z>2016-10-22</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/algorithm/ rel=category>Algorithm</a></span></div></div></header><div class="content list__excerpt post__content clearfix">递归遍历是实现深度优先遍历的既直观又简单的方式, 二叉树递归遍历的本质其实就是在不断的压栈与出栈, 明白了这一道理之后就很容易借助栈结构来将递归遍历转换成迭代遍历.
void traverse(struct TreeNode *root) { if (root) { /* 1 */ traverse(root->left); /* 2 */ traverse(root->right); /* 3 */ } } 上面的 1, 2, 3 三个位置是节点访问可能发生的位置, 分别为先序, 中序, 后序遍历. 下面我们不考虑对节点数据的访问, 单独分析一下递归遍历过程的细节.
函数调用与递归的本质 要分析递归遍历的细节, 我们就要知道递归的过程中发生了什么, 而递归实际上也只是函数调用的一种, 所以我们需要先来看一下函数调用的过程中发生了什么.
当函数调用发生时, 传给该函数的参数, 以及被调函数内部的局部变量都会被压入栈中 (现在的处理器和编译器基本都支持通过寄存器传参, 这里我们没必要考虑这些个情况), 而在被调函数返回时, 这些信息又都会从栈中弹出. 递归只是一种自己调用自己的函数调用, 也是符合这个规则的.
我们以上面的 traverse(struct TreeNode *root) 方法和下面的一颗二叉树为例, 观察一下递归遍历过程中的栈变化.
A / \ B C / \ / \ D E F G 其中 A 是根节点, 遍历过程由 traverse(root) 被调用开始, 那么按照上述的规则, 会发生如下几步, 为方便起见, 栈的增长为从左往右:</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/binary-tree-traversal/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/openflow-instruction-action/ rel=bookmark>关于 OpenFlow 协议中 Instruction, Action 概念的解读</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-10-03T21:45:30Z>2016-10-03</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/sdn/ rel=category>SDN</a></span></div></div></header><div class="content list__excerpt post__content clearfix">(首发于 sdnlab: http://www.sdnlab.com/17952.html)
阅读任何一个协议都要注意的一点是这个协议中所定义的专有术语, 对这些术语的理解不到位的话也会造成对协议的理解偏差. 本文想和大家分享几个可能容易混淆的术语.
在 OpenFlow 协议文档中经常会看到这么几个词语: Instruction, Action, Apply-actions, Action Set, Action List, Clear-actions, &mldr; 有点迷惑人, 实际上这里面只有两个实体的概念: Instruction 和 Action. 为了保持后文的易读性, 这两个概念分别用中文 &ldquo;指令&rdquo; 和 &ldquo;动作&rdquo; 来描述. 下文中的 &ldquo;指令&rdquo; 和 &ldquo;动作&rdquo; 都特指在 OpenFlow 协议中的含义.
指令这个词, 特指流表表项中的指令, 当某个报文匹配了这个表项之后, 表项中的指令就会被应用于这个报文; 而动作是比指令更细粒度的概念, 但它并不是局限于流表表项的概念, 动作可以独立于指令而存在, 也可以被包含在指令中, 具体说来, 我们在下流表的时候, 可以为某个表项的某种指令指定一些列的动作, 但是动作并不是只有下流表的时候才会被用到.
本文以目前较新的 Openflow 1.4 版本为准, 来分别看一下指令和动作的含义.
指令 每一个流表的表项都包含一系列的指令, 当报文匹配上了这个表项后, 这些指令就会被执行, 这些指令的执行结果有几种: 改变报文, 改变 action set, 改变 pipeline. 这些指令可以按照其执行结果的不同而分类, 不同的流表的表项包含的指令种类也不同, 前面说了指令可以包含动作, 但也并非所有种类的指令都包含动作, 下面我们一起来看一下指令的分类.
指令的分类 OpenFlow 1.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/openflow-instruction-action/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/quick-sort/ rel=bookmark>对快速排序的理解与实现</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2016-07-24T00:00:00Z>2016-07-24</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/algorithm/ rel=category>Algorithm</a></span></div></div></header><div class="content list__excerpt post__content clearfix">快速排序的思想 选出一个 pivot, 比 pivot 小的全都换到左边, 比 pivot 大的全都换到右边, 最后安置好 pivot. 然后以此 pivot 位置为分界线, 对两个区间递归执行快速排序, 当最终每个区间大小为 1 的时候, 排序也就完成了.
要实践这个思想, 需要解决几个问题:
pivot 的选取策略 交换策略, 也就是分区策略 pivot 的最终位置确定 关于 pivot 的选取, 原则是尽量是整个数组中所有的元素中位数. 这是个矛盾的问题, 我们找的 pivot 越接近中位数, 快排效率自然越高, 但是我们花费在找 pivot 上的时间也越长. 快排算法的核心还是要放在分治本身, 不必对 pivot 的要求过于苛刻.
目前公认比较不错的 pivot 选取策略叫做 &ldquo;Median-of-Three&rdquo;, 顾名思义, 它的意思就是在整个数组中选取三个元素, 然后再选出这三个元素的中位数作为 pivot. 那么选择哪个元素呢? 就是第一, 最后, 和中间.
第二个问题, 交换. 交换这个过程在快排里有个专门的术语叫做 &ldquo;Partition&rdquo;, 也就是分区. 因为快排的核心其实就是在不断的分区, 将 &lt; pivot 的分一区, > pivot 的分另一区, 当分区结束后, 所有 &lt; pivot 的都在 pivot 左边, 反之都在 pivot 右边.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/quick-sort/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/c-volatile/ rel=bookmark>(译) 如何使用 C 语言中的 volatile 关键字</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-11-07T21:01:45Z>2015-11-07</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/c/ rel=category>C</a></span></div></div></header><div class="content list__excerpt post__content clearfix">(原文: http://www.barrgroup.com/Embedded-Systems/How-To/C-Volatile-Keyword, 已取得翻译许可)
很多 C 程序员都不真正懂得 volatile 关键字的用法. 这无需奇怪, 因为大多数的 C 教程对 volatile 的介绍都比较简单. 这篇文章的目的就是告诉你 volatile 的正确使用方式
你有碰到过下面的几个情形吗?
代码编译运行没问题 &mdash; 直到你打开了编译器优化 代码运行的很好 &mdash; 直到一个中断发生 古怪的硬件驱动程序 RTOS task 各自单独运行时很好 &mdash; 直到有其它 task 被 spawned 如果你碰到过上述任何一个问题, 那么就可能是你没有使用 volatile 关键字的原因. 你并不孤单, volatile 关键字为很多程序员所不熟悉. 不幸的是, 很多 C 相关的书籍都没有好好的介绍 volatile 关键字.
volatile 关键字和 const 一样, 是一个限定符, 用于一个变量被声明时. 它告诉编译器, 被声明的变量的值可能随时都会被改变 &ndash; 就算使用这个变量的代码的附近 (附近有多近, 要看编译器了, 可能是同一个源文件) 没有任何修改这个变量值的语句也是如此. 给编译器的这个暗示是很严肃的, 在我们继续讲解之前, 我们先来看一下 volatile 的语法.
volatile 关键字的语法 要将一个变量声明为 volatile 的, 需要在声明时将 volatile 关键字写到数据类型关键字的前面或后面.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/c-volatile/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/pam-su-wheel-group/ rel=bookmark>PAM, su 以及 wheel 用户组</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-05-02T11:27:31Z>2015-05-02</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/linux/ rel=category>Linux</a></span></div></div></header><div class="content list__excerpt post__content clearfix">在我的 gentoo 系统下, su 使用 pam 模组, 要求只有处于 wheel 用户组的普通用户才能够使用 su 切换到 root 用户的权限. 如果你查看 /etc/pam.d/su, 可以看到下面这一行:
auth required pam_wheel.so use_uid 但是 GNU su 不支持 wheel 用户组, 也就是说, 如果你使用的是 GNU su, 那么当你 (普通用户) 执行 GNU su 来切换到 root 权限时, GNU su 不会检查你是否是 wheel 用户组的一员, 只要你给出了 root 用户的密码就能够切换成功.
这是怎么实现的呢, 可以看出, 上面那一行 pam 规则中, flag 值用的是 required, required 这个值在这里表示不管 pam_wheel.so 模块的检查结果是成功还是失败, 后续的检查都会继续运行下去, 那么 GNU su 只要忽略 pam_wheel.so 的检查结果就可以了. 而其他的 su 实现, 则不会忽略 pam_wheel.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/pam-su-wheel-group/>Read more…</a></div></article><article class="list__item post"><header class=list__header><h2 class="list__title post__title"><a href=/posts/openocd-and-openjtag/ rel=bookmark>openocd 基础与百问网的 openjtag 介绍</a></h2><div class="list__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2015-04-12T15:24:03Z>2015-04-12</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/ rel=category>嵌入式</a></span></div></div></header><div class="content list__excerpt post__content clearfix">使用 openocd 的话, 最好是先看看 openocd 的官方手册, 100 多页, 不需要全看, 但是基本, 核心的概念要了解, 比如说 debug adapter/adapter, interface, target, board 等.
Adapter 与 Interface 配置文件 debug adapter 或者直接叫做 adapter 呢, 就是指的你所使用的调试适配器, 一般来说就是 jtag 适配器了, 它会通过 JTAG 口与连接到开发板上, 比如 segger 家的 jlink, 开源的硬件项目 openjtag 等等.
使用不同的 adapter, 就需要在启动 openocd 时指定不同的 interface 文件, 这基本上是告诉 openocd 我的 adapter 用到了什么样的硬件, 参数是怎样的, 这样 openocd 才知道怎么和 adapter 通信, 因为 openocd 支持的 adapter 类型, 也就是支持的硬件设备类型太多了. 如果你写一个程序, 只支持 pl2303 类型的 usb-serial 设备, 那自然不需要像 openocd 那么复杂的配置了.</div><div class="list__footer clearfix"><a class="list__footer-readmore btn" href=/posts/openocd-and-openjtag/>Read more…</a></div></article></main><div class=pagination><a class="pagination__item pagination__item--prev btn" href=/page/4/>«</a>
<span class="pagination__item pagination__item--current">5/7</span>
<a class="pagination__item pagination__item--next btn" href=/page/6/>»</a></div></div><aside class=sidebar><div class="widget-search widget"><form class=widget-search__form role=search method=get action=https://google.com/search><label><input class=widget-search__field type=search placeholder=SEARCH… name=q aria-label=SEARCH…></label>
<input class=widget-search__submit type=submit value=Search>
<input type=hidden name=sitesearch value=https://cifer76.github.io/></form></div><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/posts/bank-run/>银行挤兑问题分析</a></li><li class=widget__item><a class=widget__link href=/posts/same-origin-policy/>A Clarification About the Same-Origin Policy</a></li><li class=widget__item><a class=widget__link href=/posts/suricata/>Suricata Quickstart</a></li><li class=widget__item><a class=widget__link href=/posts/bitcoin-vs-gold/>Bitcoin vs Gold</a></li><li class=widget__item><a class=widget__link href=/posts/anaerobic-aerobic-exercise/>有氧运动和无氧运动的区别</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=/categories/algorithm/>Algorithm</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/bitcoin/>Bitcoin</a>&nbsp;
<span class="widget__counter widget__counter--bubble">7</span></li><li class=widget__item><a class=widget__link href=/categories/blockchain/>Blockchain</a>&nbsp;
<span class="widget__counter widget__counter--bubble">6</span></li><li class=widget__item><a class=widget__link href=/categories/c/>C</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/commerce/>Commerce</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/fitness/>Fitness</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/freertos/>FreeRTOS</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/investment/>Investment</a>&nbsp;
<span class="widget__counter widget__counter--bubble">5</span></li><li class=widget__item><a class=widget__link href=/categories/knowledge/>Knowledge</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/linux/>Linux</a>&nbsp;
<span class="widget__counter widget__counter--bubble">7</span></li><li class=widget__item><a class=widget__link href=/categories/network-security/>Network Security</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/networking/>Networking</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/nginx/>Nginx</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/php/>PHP</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/programming/>Programming</a>&nbsp;
<span class="widget__counter widget__counter--bubble">8</span></li><li class=widget__item><a class=widget__link href=/categories/python/>Python</a>&nbsp;
<span class="widget__counter widget__counter--bubble">2</span></li><li class=widget__item><a class=widget__link href=/categories/reading/>Reading</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/redis/>Redis</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/rust/>Rust</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/sdn/>SDN</a>&nbsp;
<span class="widget__counter widget__counter--bubble">4</span></li><li class=widget__item><a class=widget__link href=/categories/web/>Web</a>&nbsp;
<span class="widget__counter widget__counter--bubble">7</span></li><li class=widget__item><a class=widget__link href=/categories/yearinreview/>YearInReview</a>&nbsp;
<span class="widget__counter widget__counter--bubble">3</span></li><li class=widget__item><a class=widget__link href=/categories/%E5%B5%8C%E5%85%A5%E5%BC%8F/>嵌入式</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li><li class=widget__item><a class=widget__link href=/categories/%E8%81%8C%E4%B8%9A/>职业</a>&nbsp;
<span class="widget__counter widget__counter--bubble">1</span></li></ul></div></div><div class="widget-taglist widget"><h4 class=widget__title>Tags</h4><div class=widget__content><a class="widget-taglist__link widget__link btn" href=/tags/algorithm/ title=algorithm>algorithm</a>
<a class="widget-taglist__link widget__link btn" href=/tags/async-io/ title="async io">async io</a>
<a class="widget-taglist__link widget__link btn" href=/tags/aws/ title=aws>aws</a>
<a class="widget-taglist__link widget__link btn" href=/tags/bank/ title=bank>bank</a>
<a class="widget-taglist__link widget__link btn" href=/tags/binary-tree/ title="binary tree">binary tree</a>
<a class="widget-taglist__link widget__link btn" href=/tags/bitcoin/ title=bitcoin>bitcoin</a>
<a class="widget-taglist__link widget__link btn" href=/tags/c/ title=C>C</a>
<a class="widget-taglist__link widget__link btn" href=/tags/c++/ title=C++>C++</a>
<a class="widget-taglist__link widget__link btn" href=/tags/c-programming/ title="C Programming">C Programming</a>
<a class="widget-taglist__link widget__link btn" href=/tags/centos/ title=centos>centos</a>
<a class="widget-taglist__link widget__link btn" href=/tags/cgi/ title=cgi>cgi</a>
<a class="widget-taglist__link widget__link btn" href=/tags/commerce/ title=commerce>commerce</a>
<a class="widget-taglist__link widget__link btn" href=/tags/coroutine/ title=coroutine>coroutine</a>
<a class="widget-taglist__link widget__link btn" href=/tags/cors/ title=CORS>CORS</a>
<a class="widget-taglist__link widget__link btn" href=/tags/csprng/ title=CSPRNG>CSPRNG</a>
<a class="widget-taglist__link widget__link btn" href=/tags/dfs/ title=DFS>DFS</a>
<a class="widget-taglist__link widget__link btn" href=/tags/dpos/ title=dpos>dpos</a>
<a class="widget-taglist__link widget__link btn" href=/tags/electrum/ title=Electrum>Electrum</a>
<a class="widget-taglist__link widget__link btn" href=/tags/encoding/ title=encoding>encoding</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ethereum/ title=Ethereum>Ethereum</a>
<a class="widget-taglist__link widget__link btn" href=/tags/fastcgi/ title=fastcgi>fastcgi</a>
<a class="widget-taglist__link widget__link btn" href=/tags/fitness/ title=fitness>fitness</a>
<a class="widget-taglist__link widget__link btn" href=/tags/gnu-screen/ title="gnu screen">gnu screen</a>
<a class="widget-taglist__link widget__link btn" href=/tags/hp-%E5%B0%8F%E5%9E%8B%E6%9C%BA/ title="HP 小型机">HP 小型机</a>
<a class="widget-taglist__link widget__link btn" href=/tags/indigo/ title=Indigo>Indigo</a>
<a class="widget-taglist__link widget__link btn" href=/tags/jit/ title=JIT>JIT</a>
<a class="widget-taglist__link widget__link btn" href=/tags/kernel/ title=kernel>kernel</a>
<a class="widget-taglist__link widget__link btn" href=/tags/leetcode/ title=leetcode>leetcode</a>
<a class="widget-taglist__link widget__link btn" href=/tags/linux/ title=linux>linux</a>
<a class="widget-taglist__link widget__link btn" href=/tags/market-marker/ title=market-marker>market-marker</a>
<a class="widget-taglist__link widget__link btn" href=/tags/mount/ title=mount>mount</a>
<a class="widget-taglist__link widget__link btn" href=/tags/network-security/ title="network security">network security</a>
<a class="widget-taglist__link widget__link btn" href=/tags/nginx/ title=nginx>nginx</a>
<a class="widget-taglist__link widget__link btn" href=/tags/openflow/ title=OpenFlow>OpenFlow</a>
<a class="widget-taglist__link widget__link btn" href=/tags/openjtag/ title=openjtag>openjtag</a>
<a class="widget-taglist__link widget__link btn" href=/tags/openocd/ title=openocd>openocd</a>
<a class="widget-taglist__link widget__link btn" href=/tags/pam/ title=pam>pam</a>
<a class="widget-taglist__link widget__link btn" href=/tags/pathinfo/ title=pathinfo>pathinfo</a>
<a class="widget-taglist__link widget__link btn" href=/tags/pbft/ title=PBFT>PBFT</a>
<a class="widget-taglist__link widget__link btn" href=/tags/pcduino/ title=pcduino>pcduino</a>
<a class="widget-taglist__link widget__link btn" href=/tags/php/ title=php>php</a>
<a class="widget-taglist__link widget__link btn" href=/tags/pptp/ title=PPTP>PPTP</a>
<a class="widget-taglist__link widget__link btn" href=/tags/privacy/ title=privacy>privacy</a>
<a class="widget-taglist__link widget__link btn" href=/tags/prng/ title=PRNG>PRNG</a>
<a class="widget-taglist__link widget__link btn" href=/tags/programming/ title=programming>programming</a>
<a class="widget-taglist__link widget__link btn" href=/tags/python/ title=python>python</a>
<a class="widget-taglist__link widget__link btn" href=/tags/quick-sort/ title=quick-sort>quick-sort</a>
<a class="widget-taglist__link widget__link btn" href=/tags/redhat/ title=redhat>redhat</a>
<a class="widget-taglist__link widget__link btn" href=/tags/redis/ title=redis>redis</a>
<a class="widget-taglist__link widget__link btn" href=/tags/rhel/ title=rhel>rhel</a>
<a class="widget-taglist__link widget__link btn" href=/tags/rust/ title=rust>rust</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ryu/ title=Ryu>Ryu</a>
<a class="widget-taglist__link widget__link btn" href=/tags/same-origin/ title=Same-origin>Same-origin</a>
<a class="widget-taglist__link widget__link btn" href=/tags/scgi/ title=SCGI>SCGI</a>
<a class="widget-taglist__link widget__link btn" href=/tags/sdn/ title=SDN>SDN</a>
<a class="widget-taglist__link widget__link btn" href=/tags/segwit/ title=segwit>segwit</a>
<a class="widget-taglist__link widget__link btn" href=/tags/smart-contracts/ title="smart contracts">smart contracts</a>
<a class="widget-taglist__link widget__link btn" href=/tags/solidity/ title=Solidity>Solidity</a>
<a class="widget-taglist__link widget__link btn" href=/tags/suricata/ title=suricata>suricata</a>
<a class="widget-taglist__link widget__link btn" href=/tags/ubuntu/ title=ubuntu>ubuntu</a>
<a class="widget-taglist__link widget__link btn" href=/tags/unicode/ title=unicode>unicode</a>
<a class="widget-taglist__link widget__link btn" href=/tags/vpn/ title=VPN>VPN</a>
<a class="widget-taglist__link widget__link btn" href=/tags/wsgi/ title=WSGI>WSGI</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/ title=嵌入式>嵌入式</a>
<a class="widget-taglist__link widget__link btn" href=/tags/%E7%BF%BB%E8%AF%91/ title=翻译>翻译</a></div></div><div class="widget-social widget"><h4 class="widget-social__title widget__title">Social</h4><div class="widget-social__content widget__content"><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Twitter rel="noopener noreferrer" href=https://twitter.com/0x76i target=_blank><svg class="widget-social__link-icon icon icon-twitter" width="24" height="24" viewBox="0 0 384 312"><path d="m384 36.9c-14.1 6.3-29.3 10.5-45.2 12.4 16.3-9.7 28.8-25.2 34.6-43.6-15.2 9-32.1 15.6-50 19.1-14.4-15.2-34.9-24.8-57.5-24.8-43.5.0-78.8 35.3-78.8 78.8.0 6.2.7 12.2 2 17.9-65.5-3.3-123.5-34.6-162.4-82.3C20 26 16.1 39.6 16.1 54c0 27.3 13.9 51.4 35 65.6-12.9-.4-25.1-4-35.7-9.9v1c0 38.2 27.2 70 63.2 77.2-6.6 1.8-13.6 2.8-20.8 2.8-5.1.0-10-.5-14.8-1.4 10 31.3 39.1 54.1 73.6 54.7-27 21.1-60.9 33.7-97.8 33.7-6.4.0-12.6-.4-18.8-1.1C34.9 299 76.3 312 120.8 312c144.9.0 224.1-120 224.1-224.1.0-3.4-.1-6.8-.2-10.2 15.4-11.1 28.7-25 39.3-40.8z"/></svg><span>Twitter</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=GitHub rel="noopener noreferrer" href=https://github.com/cifer76 target=_blank><svg class="widget-social__link-icon icon icon-github" width="24" height="24" viewBox="0 0 384 374"><path d="m192 0C85.9.0.0 85.8.0 191.7c0 84.7 55 156.6 131.3 181.9 9.6 1.8 13.1-4.2 13.1-9.2.0-4.6-.2-16.6-.3-32.6-53.4 11.6-64.7-25.7-64.7-25.7-8.7-22.1-21.3-28-21.3-28-17.4-11.9 1.3-11.6 1.3-11.6 19.3 1.4 29.4 19.8 29.4 19.8 17.1 29.3 44.9 20.8 55.9 15.9 1.7-12.4 6.7-20.8 12.2-25.6-42.6-4.8-87.5-21.3-87.5-94.8.0-20.9 7.5-38 19.8-51.4-2-4.9-8.6-24.3 1.9-50.7.0.0 16.1-5.2 52.8 19.7 15.3-4.2 31.7-6.4 48.1-6.5 16.3.1 32.7 2.2 48.1 6.5 36.7-24.8 52.8-19.7 52.8-19.7 10.5 26.4 3.9 45.9 1.9 50.7 12.3 13.4 19.7 30.5 19.7 51.4.0 73.7-44.9 89.9-87.7 94.6 6.9 5.9 13 17.6 13 35.5.0 25.6-.2 46.3-.2 52.6.0 5.1 3.5 11.1 13.2 9.2C329 348.2 384 276.4 384 191.7 384 85.8 298 0 192 0z"/></svg><span>GitHub</span></a></div><div class="widget-social__item widget__item"><a class="widget-social__link widget__link btn" title=Email href=mailto:mantianyu@gmail.com><svg class="widget-social__link-icon icon icon-mail" width="24" height="24" viewBox="0 0 416 288"><path d="m0 16v256 16h16 384 16v-16V16 0h-16H16 0zm347 16-139 92.5L69 32zM199 157.5l9 5.5 9-5.5L384 46v210H32V46z"/></svg><span>mantianyu@gmail.com</span></a></div></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2021 Cifer.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=/js/menu.js></script></body></html>